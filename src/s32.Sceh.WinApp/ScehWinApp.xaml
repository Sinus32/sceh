<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="s32.Sceh.WinApp.ScehWinApp"
    xmlns:local="clr-namespace:s32.Sceh.WinApp"
    xmlns:ctl="clr-namespace:s32.Sceh.WinApp.Controls"
    xmlns:resx="clr-namespace:s32.Sceh.WinApp.Translations"
    xmlns:code="clr-namespace:s32.Sceh.Code;assembly=ScehLib"
    xmlns:ds="clr-namespace:s32.Sceh.DataStore;assembly=ScehLib"
    StartupUri="LoginWindow.xaml" Exit="Application_Exit" Startup="Application_Startup">
  <Application.Resources>
    <BitmapImage x:Key="defaultAvatar" UriSource="Img/avatar.jpg" />
    <BitmapImage x:Key="defaultCard" UriSource="Img/card.png" />
    <ctl:UrlToImageFileConverter x:Key="avatarImageFileConv" Directory="{x:Static code:DataManager.AvatarsDirectory}"
      NewFilePriority="{x:Static code:DownloadPriority.High}" OldFilePriority="{x:Static code:DownloadPriority.Low}" />
    <ctl:UrlToImageFileConverter x:Key="cardImageFileConv" Directory="{x:Static code:DataManager.CardsDirectory}"
      NewFilePriority="{x:Static code:DownloadPriority.Medium}" OldFilePriority="{x:Static code:DownloadPriority.Low}" />
    <ctl:BooleanToVisibilityConverter x:Key="visibleToVisibilityConv" ValueForFalse="Collapsed" ValueForTrue="Visible" />
    <ctl:BooleanToVisibilityConverter x:Key="hideToVisibilityConv" ValueForFalse="Visible" ValueForTrue="Collapsed" />
    <Style x:Key="urlOrSteamIdTextBlock" TargetType="TextBlock">
      <Setter Property="Foreground" Value="#FF8D8D8D" />
      <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ComboBoxItem}}, Path=IsHighlighted}" Value="True">
          <Setter Property="Foreground" Value="#FF9633AC" />
        </DataTrigger>
      </Style.Triggers>
    </Style>
    <DataTemplate DataType="{x:Type ds:SteamProfile}">
      <StackPanel Orientation="Horizontal" Margin="0,1,0,1">
        <ctl:LazyImage ImageFile="{Binding AvatarSmallUrl, Converter={StaticResource avatarImageFileConv}}" Height="24" Margin="0,0,5,0"
          Source="{Binding LazySource, RelativeSource={RelativeSource Self}, TargetNullValue={StaticResource defaultAvatar}, Mode=OneWay}" />
        <TextBlock Text="{Binding Name}" VerticalAlignment="Center" />
        <TextBlock Text="{Binding CustomUrlOrSteamId, StringFormat={} ({0})}" Style="{StaticResource urlOrSteamIdTextBlock}" VerticalAlignment="Center" />
      </StackPanel>
    </DataTemplate>
  </Application.Resources>
</Application>
