<Window x:Class="s32.Sceh.WinApp.InvCompareWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:s32.Sceh.WinApp"
    xmlns:ctl="clr-namespace:s32.Sceh.WinApp.Controls"
    xmlns:resx="clr-namespace:s32.Sceh.WinApp.Translations"
    xmlns:code="clr-namespace:s32.Sceh.Code;assembly=ScehLib"
    xmlns:ds="clr-namespace:s32.Sceh.DataStore;assembly=ScehLib"
    Title="InvCompareWindow" Height="300" Width="500" Icon="Img/sceh.ico">
  <Window.CommandBindings>
    <CommandBinding Command="local:InvCompareWindow.CompareCommand" CanExecute="CompareCommand_CanExecute" Executed="CompareCommand_Executed" />
    <CommandBinding Command="local:InvCompareWindow.ShowHideCards" CanExecute="ShowHideCards_CanExecute" Executed="ShowHideCards_Executed" />
  </Window.CommandBindings>
  <DockPanel>
    <Menu DockPanel.Dock="Top">
      <MenuItem Header="{x:Static resx:Strings.MenuItem_MyProfile}">
        <MenuItem Header="{x:Static resx:Strings.MenuItem_Inventory}" />
        <MenuItem Header="{x:Static resx:Strings.MenuItem_Badges}" />
        <Separator />
        <MenuItem Header="{x:Static resx:Strings.MenuItem_ChangeProfile}" />
        <MenuItem Header="{x:Static resx:Strings.MenuItem_Exit}" />
      </MenuItem>
      <MenuItem Header="{x:Static resx:Strings.MenuItem_OthersProfile}">
      </MenuItem>
    </Menu>
    <Grid DockPanel.Dock="Top">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="40" />
        <ColumnDefinition Width="3*" />
        <ColumnDefinition Width="2*" />
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
      </Grid.RowDefinitions>
      <ctl:LazyImage ImageFile="{Binding OwnerProfile.AvatarSmallUrl, Converter={StaticResource avatarImageFileConv}}" Stretch="None"
        Source="{Binding LazySource, RelativeSource={RelativeSource Self}, TargetNullValue={StaticResource defaultAvatar}, Mode=OneWay}" Grid.RowSpan="2" />
      <TextBlock Text="{Binding OwnerProfile.Name}" VerticalAlignment="Center" FontSize="16" Margin="2" Grid.Column="1" />
      <TextBlock Text="{Binding RequestCount, Source={x:Static code:SteamDataDownloader.Info}, StringFormat=Requests: {0}}"
        VerticalAlignment="Center" FontSize="16" Margin="2" Grid.Column="2" TextAlignment="Right" />
      <ComboBox x:Name="cbOtherProfile" IsEditable="True" ItemsSource="{Binding SteamProfiles}"
        VerticalAlignment="Center" TextSearch.TextPath="CustomUrlOrSteamId" Grid.Row="1" Grid.Column="1" />
      <Button x:Name="btnCompare" Command="local:InvCompareWindow.CompareCommand" Content="{x:Static resx:Strings.CompareButtonText}"
        HorizontalAlignment="Left" Grid.Row="1" Grid.Column="2" Margin="10,0,0,0" Padding="20,2" />
      <StackPanel Grid.Row="2" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Right">
        <TextBlock Text="{Binding ErrorMessage}" TextWrapping="Wrap" />
        <Button Command="local:InvCompareWindow.ShowHideCards" CommandParameter="{x:Static code:CardsCompareManager.ShowTradeSugestionsStrategy}" Margin="2">
          <Image Source="Img/selection1.png" Stretch="None" />
        </Button>
        <Button Command="local:InvCompareWindow.ShowHideCards" CommandParameter="{x:Static code:CardsCompareManager.ShowMyCardsStrategy}" Margin="2">
          <Image Source="Img/selection2.png" Stretch="None" />
        </Button>
        <Button Command="local:InvCompareWindow.ShowHideCards" CommandParameter="{x:Static code:CardsCompareManager.ShowAllStrategy}" Margin="2">
          <Image Source="Img/selection3.png" Stretch="None" />
        </Button>
        <Button Command="local:InvCompareWindow.ShowHideCards" CommandParameter="{x:Static code:CardsCompareManager.ShowOtherCardsStrategy}" Margin="2">
          <Image Source="Img/selection4.png" Stretch="None" />
        </Button>
        <Button Command="local:InvCompareWindow.ShowHideCards" CommandParameter="{x:Static code:CardsCompareManager.ShowSelectedStrategy}" Margin="2">
          <Image Source="Img/selection5.png" Stretch="None" />
        </Button>
      </StackPanel>
    </Grid>

    <ItemsControl ItemsSource="{Binding SteamApps}" VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True">
      <ItemsControl.ItemTemplate>
        <DataTemplate>
          <Grid Visibility="{Binding Hide, Converter={StaticResource hideToVisibilityConv}}">
            <TextBlock Text="{Binding Name}" />
          </Grid>
        </DataTemplate>
      </ItemsControl.ItemTemplate>
      <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
          <VirtualizingStackPanel />
        </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
      <ItemsControl.Template>
        <ControlTemplate>
          <Border SnapsToDevicePixels="True"
              BorderThickness="{TemplateBinding Border.BorderThickness}"
              Padding="{TemplateBinding Control.Padding}"
              BorderBrush="{TemplateBinding Border.BorderBrush}"
              Background="{TemplateBinding Panel.Background}">
            <ScrollViewer Focusable="False" Padding="{TemplateBinding Control.Padding}">
              <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
            </ScrollViewer>
          </Border>
        </ControlTemplate>
      </ItemsControl.Template>
    </ItemsControl>

  </DockPanel>
</Window>
